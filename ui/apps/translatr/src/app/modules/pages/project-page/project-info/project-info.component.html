<div class="container flex" *ngIf="project$ | async as project">
  <metric
    [routerLink]="['/', project.ownerUsername]"
    name="Owner"
    [value]="project.ownerName"
    icon="account_circle"
    class="owner"></metric>

  <metric
    routerLink="locales"
    name="Languages"
    [value]="(locales$ | async)?.list?.length"
    icon="language"
    class="locale-count"></metric>

  <metric
    routerLink="keys"
    name="Keys"
    [value]="(keys$ | async)?.list?.length"
    icon="vpn_key"
    class="key-count"></metric>

  <metric
    routerLink="members"
    name="Members"
    [value]="project.members?.length"
    icon="group"
    class="member-count"></metric>

  <mat-card class="info mat-elevation-z0">
    <mat-card-header>
      <mat-card-title>
        {{ project?.name }}
      </mat-card-title>
      <mat-card-subtitle i18n="@@temporal.info">
        Created {{ project?.whenCreated | amTimeAgo }}, updated
        {{ project?.whenUpdated | amTimeAgo }}
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p *ngIf="project?.description; else descriptionMissing">
        {{ project.description }}
      </p>
      <ng-template #descriptionMissing>
        <p class="missing" i18n="@@description.missing">No description available.</p>
      </ng-template>
    </mat-card-content>
  </mat-card>

  <mat-card class="activity mat-elevation-z0">
    <mat-card-title i18n="@@activity">Activity</mat-card-title>
    <mat-card-content>
      <app-activity [activity]="activity$ | async"></app-activity>
    </mat-card-content>
  </mat-card>

  <mat-card class="small locales mat-elevation-z0">
    <mat-card-title i18n="@@locales.latest">Latest Languages</mat-card-title>
    <mat-card-content>
      <mat-list *ngIf="latestLocales$ | async; else localesEmpty" dense>
        <a *ngFor="let locale of latestLocales$ | async"
           mat-list-item
           [routerLink]="['locales', locale.name]">
          <mat-icon matListIcon class="locale circle">language</mat-icon>
          <h3 matLine>{{ locale.name }} â€” {{ locale.displayName }}</h3>
          <p matLine title="{{locale.whenCreated | date:'full'}}">{{locale.whenCreated | amTimeAgo}}</p>
        </a>
      </mat-list>
      <ng-template #localesEmpty>
        <div class="empty">No languages yet.</div>
      </ng-template>
    </mat-card-content>
  </mat-card>

  <mat-card class="small keys mat-elevation-z0">
    <mat-card-title i18n="@@keys.latest">Latest Keys</mat-card-title>
    <mat-card-content>
      <mat-list *ngIf="latestKeys$ | async; else keysEmpty" dense>
        <a *ngFor="let key of latestKeys$ | async"
           mat-list-item
           [routerLink]="['keys', key.name]">
          <mat-icon matListIcon class="key circle">vpn_key</mat-icon>
          <h3 matLine>{{ key.name }}</h3>
          <p matLine title="{{key.whenCreated | date:'full'}}">{{key.whenCreated | amTimeAgo}}</p>
        </a>
      </mat-list>
      <ng-template #keysEmpty>
        <div class="empty">No keys yet.</div>
      </ng-template>
    </mat-card-content>
  </mat-card>

  <mat-card class="small messages mat-elevation-z0">
    <mat-card-title i18n="@@translations.latest">Latest Translations</mat-card-title>
    <mat-card-content>
      <div *ngIf="latestMessages$ | async; else messagesEmpty">
        <ng-container
          *ngFor="let message of latestMessages$ | async; let i = index"
        >
          <span *ngIf="i > 0">, </span>
          <a class="link" [routerLink]="['keys', message.localeName]">{{
            message.localeName
            }}</a>
        </ng-container>
      </div>
      <ng-template #messagesEmpty>
        <h3 class="empty">No translations yet.</h3>
      </ng-template>
    </mat-card-content>
  </mat-card>

  <div></div>
</div>
