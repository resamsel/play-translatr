<div class="container flex" *ngIf="project$ | async as project">
  <dev-metric
    [routerLink]="['/', project.ownerUsername]"
    name="Owner"
    [value]="project.ownerName"
    icon="account_circle"
    class="owner"></dev-metric>

  <dev-metric
    routerLink="locales"
    name="Languages"
    [value]="(locales$ | async)?.total"
    icon="language"
    class="locale count"></dev-metric>

  <dev-metric
    routerLink="keys"
    name="Keys"
    [value]="(keys$ | async)?.total"
    icon="vpn_key"
    class="key count"></dev-metric>

  <dev-metric
    routerLink="members"
    name="Members"
    [value]="project.members?.length"
    icon="group"
    class="member count"></dev-metric>

  <mat-card class="info">
    <mat-card-header>
      <mat-card-title>
        {{ project.name }}
        <span class="sub-title">{{ project.id}}</span>
      </mat-card-title>
      <mat-card-subtitle i18n="@@temporal.info">
        Created {{ project.whenCreated | amTimeAgo }}, updated
        {{ project.whenUpdated | amTimeAgo }}
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p *ngIf="project.description; else descriptionMissing">
        {{ project.description }}
      </p>
      <ng-template #descriptionMissing>
        <p class="missing" i18n="@@description.missing">No description available.</p>
      </ng-template>
    </mat-card-content>
  </mat-card>

  <mat-card *ngIf="false" class="activity">
    <mat-card-header>
      <mat-card-title i18n>Activity</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      ...
    </mat-card-content>
  </mat-card>

  <mat-card class="metric locales">
    <mat-card-header>
      <mat-card-title i18n="@@locales.latest">Recent Languages</mat-card-title>
      <mat-card-subtitle>Latest additions to this projects' languages.</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content *ngIf="latestLocales$ | async as latestLocales">
      <mat-nav-list *ngIf="latestLocales.length; else localesEmpty">
        <a *ngFor="let locale of latestLocales"
           mat-list-item
           [routerLink]="['locales', locale.name]">
          <mat-icon matListIcon class="locale circle">language</mat-icon>
          <h3 matLine>{{ locale.name }} â€” {{ locale.displayName }}</h3>
          <p [matTooltip]="locale.whenCreated | date:'full'" matLine>{{locale.whenCreated | amTimeAgo}}</p>
        </a>
      </mat-nav-list>
      <ng-template #localesEmpty>
        <div class="empty">
          <mat-icon class="locale circle">language</mat-icon>
          <h3>No languages yet.</h3>
          <button
            *ngIf="canCreateLocale$ | async"
            (click)="openLocaleCreationDialog(project)"
            i18n="@@locale.create"
            mat-stroked-button>Add language
          </button>
        </div>
      </ng-template>
    </mat-card-content>
  </mat-card>

  <mat-card class="metric keys">
    <mat-card-header>
      <mat-card-title i18n="@@keys.latest">Recent Keys</mat-card-title>
      <mat-card-subtitle>Latest additions to this projects' keys.</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content *ngIf="latestKeys$ | async as latestKeys">
      <mat-nav-list *ngIf="latestKeys.length > 0; else keysEmpty">
        <a *ngFor="let key of latestKeys"
           mat-list-item
           [routerLink]="['keys', key.name]">
          <mat-icon matListIcon class="key circle">vpn_key</mat-icon>
          <h3 matLine>{{ key.name }}</h3>
          <p [matTooltip]="key.whenCreated | date:'full'" matLine>{{key.whenCreated | amTimeAgo}}</p>
        </a>
      </mat-nav-list>
      <ng-template #keysEmpty>
        <div class="empty">
          <mat-icon class="key circle">vpn_key</mat-icon>
          <h3>No keys yet.</h3>
          <button
            *ngIf="canCreateKey$ | async"
            (click)="openKeyCreationDialog(project)"
            i18n="@@key.create"
            mat-stroked-button>Add key
          </button>
        </div>
      </ng-template>
    </mat-card-content>
  </mat-card>

  <mat-card class="metric messages">
    <mat-card-header>
      <mat-card-title i18n="@@translations.latest">Recent Translations</mat-card-title>
      <mat-card-subtitle>Latest translations of this project.</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content *ngIf="latestMessages$ | async as latestMessages">
      <mat-nav-list *ngIf="latestMessages.length > 0; else messagesEmpty">
        <a *ngFor="let message of latestMessages"
           [queryParams]="{locale: message.localeName}"
           [routerLink]="['keys', message.keyName]"
           mat-list-item>
          <mat-icon class="message circle" matListIcon>message</mat-icon>
          <h3 matLine>{{ message.keyName }} - {{ message.localeName }}</h3>
          <p [matTooltip]="message.whenCreated | date:'full'" matLine>{{message.whenCreated | amTimeAgo}}</p>
        </a>
      </mat-nav-list>
      <ng-template #messagesEmpty>
        <div class="empty">
          <mat-icon class="message circle">language</mat-icon>
          <h3 i18n="@@messages.empty">No translations yet.</h3>
        </div>
      </ng-template>
    </mat-card-content>
  </mat-card>

  <div></div>
</div>
