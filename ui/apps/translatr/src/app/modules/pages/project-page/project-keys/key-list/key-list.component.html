<app-nav-list
  [pagedList]="keys"
  [criteria]="criteria"
  [empty]="empty"
  [nothingFound]="nothingFound"
  [canCreate]="canCreate"
  showFilter="true"
  addTooltip="Add new key"
  i18n-addTooltip="@@key.create.tooltip"
  (add)="openKeyCreationDialog(project)"
  (filter)="onFilter($event)"
  (more)="more.emit($event)"
>
  <a
    *ngFor="let key of keys?.list; trackBy: trackByFn"
    [routerLink]="[
        '/',
        project.ownerUsername,
        project.name,
        'keys',
        key.name
      ]"
    mat-list-item
  >
    <mat-icon class="key circle" matListIcon>vpn_key</mat-icon>
    <h3 matLine>{{ key.name }}</h3>
    <p
      matLine
      [matTooltip]="key?.whenUpdated | date: 'full'"
      i18n="@@updated.when"
    >
      Updated {{ key?.whenUpdated | amTimeAgo }}
    </p>
    <button
      (click)="onEdit(key, $event)"
      mat-icon-button
      i18n-matTooltip="@@button.edit"
      matTooltip="Edit"
    >
      <mat-icon>edit</mat-icon>
    </button>
    <button
      (click)="onDelete(key, $event)"
      mat-icon-button
      i18n-matTooltip="@@button.delete"
      matTooltip="Delete"
    >
      <mat-icon>delete</mat-icon>
    </button>
  </a>
</app-nav-list>

<ng-template #empty>
  <dev-empty-view icon="vpn_key">
    <p>It seems there are no keys defined, yet - would you like to add one now?</p>
    <button
      *ngIf="canCreate"
      (click)="openKeyCreationDialog(project)"
      color="accent"
      i18n="@@key.create"
      mat-raised-button>Add key
    </button>
  </dev-empty-view>
</ng-template>

<ng-template #nothingFound>
  <dev-empty-view icon="vpn_key" vertical="true">
    <p i18n="@@keys.notfound">No keys found.</p>
  </dev-empty-view>
</ng-template>
