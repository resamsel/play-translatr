@(template: utils.Template, project: models.Project, locales: List[models.Locale], progress: Map[java.util.UUID, Double], form: Form[forms.SearchForm])

@main(template.withTitle(Messages("locales.title", project.name))) {
	@tags.search(form)()
} {
		<a class="breadcrumb" href="@routes.Dashboards.dashboard()">
			@Messages("dashboard")
		</a>
		<a class="breadcrumb" href="@routes.Projects.project(project.id)">
			@project.name
		</a>
		<a class="breadcrumb active" href="@routes.Projects.locales(project.id)">
			@Messages("locales")
		</a>
} {
	@content(project, "locales") {
		<h4 class="header">@Messages("locales")</h4>
		<table class="table responsive-table card">
			<thead>
				<tr>
					<th class="name">@Messages("locale.name")</th>
					<th class="missing">@Messages("locale.status")</th>
					<th class="locale-progress">@Messages("locale.progress")</th>
					<th class="actions">@Messages("row.actions")</th>
				</tr>
			</thead>
			<tbody>
				@for(locale <- locales) {
					<tr id="@locale.id" class="locale" name="@utils.FormatUtils.formatLocale(ctx.lang().locale, locale.name).toLowerCase @locale.name.toLowerCase">
						<td class="name">
							<a class="locale" href="@routes.Locales.locale(locale.id)">
								@tags.locale(locale.name)
							</a>
						</td>
						<td class="missing">
							@defining(project.missing(locale.id)) { missing =>
								@if(missing == 0) {
									@Messages("locale.complete")
								} else {
									@Messages("messages.missing", missing)
								}
							}
						</td>
						<td class="locale-progress">
							<div class="progress">
								<div class="determinate" style="width: @{progress.getOrDefault(locale.id, 0)*100}%;"></div>
							</div>
						</td>
						<td class="actions right-align">
							<a
								href="@routes.Locales.edit(locale.id)"
								class="btn-flat btn-hover waves-effect waves-light"
								title="@Messages("button.edit")">
								<i class="material-icons">mode_edit</i>
							</a>
							<a
								href="@routes.Locales.upload(locale.id)"
								class="btn-flat btn-hover waves-effect waves-light"
								title="@Messages("button.import")">
								<i class="material-icons">file_upload</i>
							</a>
							<a
								href="#"
								class="dropdown-button btn-flat btn-hover waves-effect waves-light"
								title="@Messages("button.export")"
								data-activates="dropdown-@locale.id"
								data-constrainwidth="false"
								data-alignment="right">
								<i class="material-icons">file_download</i>
							</a>
							<ul id="dropdown-@locale.id" class="dropdown-content">
								@for(t <- models.FileType.values) {
									<li>
										<a
											href="@routes.Application.download(locale.id, t.key)">
											@Messages("filetype." + t.key)
										</a>
									</li>
								}
							</ul>
							<a
								href="@routes.Locales.remove(locale.id)"
								class="btn-flat btn-hover waves-effect waves-light"
								title="@Messages("button.remove")">
								<i class="material-icons">delete_forever</i>
							</a>
						</td>
					</tr>
				}
			</tbody>
		</table>
		@tags.pager(routes.Projects.locales(project.id), form.get)
	}

	@tags.fabContainer("create", "add", tooltip = Messages("locale.create.tooltip"), styleClass = "blue")

	@tags.modal(Messages("locale.new"), "modal-create") {
		@tags.localeCreate(project)
	}

	<script>
		var projectId = '@project.id';
	</script>
	<script src="@routes.Assets.versioned("javascripts/projectLocales.js")"></script>
}