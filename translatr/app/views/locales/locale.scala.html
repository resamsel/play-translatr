@(project: models.Project, locale: models.Locale, keys: List[models.Key], locales: List[models.Locale], messages: Map[String, models.Message], form: Form[forms.SearchForm])

@import utils.Template

@localeActions = {
	<li>
		@tags.fab("remove-locale", "delete_forever", href = routes.Application.localeRemove(locale.id).url, tooltip = Messages("locale.remove.tooltip"), styleClass = "red")
	</li>
	<li>
		@tags.fab("edit-locale", "edit", href = routes.Application.localeEdit(locale.id).url, tooltip = Messages("locale.edit.tooltip"), styleClass = "blue")
	</li>
}

@main(Template.from(Messages("locale.title", project.name, tags.locale(locale.name)), "locale")) {
	@tags.search(form) {
		<button
			type="button"
			class="btn btn-flat dropdown-button"
			data-activates="filter-options"
			data-beloworigin="true"
			data-alignment="right"
			data-constrainwidth="false">
			<i class="material-icons">arrow_drop_down</i>
		</button>
		<ul id="filter-options" class="dropdown-content">
			<li>
				<input id="field-missing" name="missing" type="checkbox" @if(form.get.missing) {checked="checked"} />
				<label for="field-missing">
					@Messages("message.untranslated")
				</label>
			</li>
		</ul>
	}
} {
	<a class="breadcrumb" href="@routes.Dashboards.dashboard()">
		@Messages("dashboard")
	</a>
	<a class="breadcrumb" href="@routes.Projects.project(project.id)">
		@project.name
	</a>
	<a class="breadcrumb" href="@routes.Projects.locales(project.id)">
		@Messages("locales")
	</a>
	<a class="breadcrumb active" href="@routes.Application.locale(locale.id)">
		@tags.locale(locale.name)
	</a>
} {
	@tags.editor {
		<h3 class="section-heading">@Messages("keys")</h3>
		<ul class="collection keys">
			@tags.keyItems(keys, messages, false)
		</ul>
	} {
		<form id="form-message">
			<div id="panel-message" class="card no-image">
				<div class="card-image red">
					<span class="card-title">@Messages("locale.to.label") @tags.locale(locale.name)</span>
				</div>
				<div class="progress" style="margin: 0; visibility: hidden">
					<div class="indeterminate"></div>
				</div>
				<div class="card-content">
					<input id="field-id" type="hidden" />
					<input id="field-key" type="hidden" />
					<input id="field-keyId" type="hidden" />
					<div class="input-field">
						<textarea
							id="field-value"
							class="materialize-textarea"></textarea>
						<label for="field-value">@Messages("locale.value.label")</label>
					</div>
				</div>
				<div class="card-action">
					<button
						type="submit"
						class="btn waves-effect waves-light btn-save">
						@Messages("button.save")
						<i class="material-icons right">send</i>
					</button>
					<button
						type="button"
						class="btn-flat waves-effect waves-light btn-cancel">
						@Messages("button.cancel")
					</button>
				</div>
			</div>
		</form>

		<!-- Preview -->
		<div id="panel-preview">
			<h3 class="section-heading">@Messages("locale.preview")</h3>
			<div id="preview"></div>
		</div>

		<div id="no-selection" class="valign-wrapper">
			<span class="valign">@Messages("key.selection.none")</span>
		</div>
	} {
		<h3 class="section-heading">@Messages("messages")</h3>
		<ul id="panel-messages" class="collection messages">
			<li class="collection-item waves-effect waves-red message template">
				<a title="@Messages("value.copy")">
					<span class="title localeName truncate">Name</span>
					<div class="value">Value</div>
				</a>
			</li>
		</ul>
	}

	@tags.fabContainer("create", "add", tooltip = Messages("key.create.tooltip"), styleClass = "light-green", actions = localeActions)

	@tags.modal(Messages("key.new"), "modal-create") {
		<form id="form-key" method="post" action="@routes.Application.keyCreate(project.id, locale.id)">
			<div class="form-group">
				<input id="field-key-name" name="name" class="form-control" placeholder="@Messages("key.label")"></input>
			</div>
		</form>
	}

	<script>
		var projectId = '@project.id';
		var localeId = '@locale.id';
		var locales = {
			@for(locale <- locales) {
				'@locale.id': '@tags.locale(locale.name)',
			}
		};
		var messages = {
			'message.updated': '@Messages("message.updated")'
		};
	</script>
	<script src="@routes.Assets.versioned("javascripts/locale.js")"></script>
}
